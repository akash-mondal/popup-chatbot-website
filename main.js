import { GoogleGenerativeAI } from "@google/generative-ai";
import md from "markdown-it";
import bhashini from 'bhashini-translation';
let mediaRecorder;
// Initialize the model
const genAI = new GoogleGenerativeAI(`${import.meta.env.VITE_API_KEY}`);

const model = genAI.getGenerativeModel({ model: "gemini-1.5-pro" });
bhashini.auth("c52783f465184b9ca6cd7cc26f5cd1aa", "14c04a40ce-45f7-4813-9871-efdf2c3f6c73", "aIs1uCF6_EU6Oq6NIImSzvZp6mPj3ab-i0lu3DZwGN35X5f8baV31ZUsCpAdrGpp");
let history = [];

async function getResponse(prompt) {
  const chat = await model.startChat({ history: history });
  const result = await chat.sendMessage(prompt);
  const response = await result.response;
  const text = response.text();

  console.log(text);
  return text;
}
async function recordAudio() {
  if (mediaRecorder && mediaRecorder.state === 'recording') {
    mediaRecorder.stop();
    mediaRecorder = null;
  } else {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    mediaRecorder = new MediaRecorder(stream);
    const chunks = [];

    mediaRecorder.ondataavailable = (event) => {
      chunks.push(event.data);
    };

    mediaRecorder.onstop = async () => {
      const blob = new Blob(chunks, { 'type': 'audio/ogg; codecs=opus' });
      const audioBase64 = await new Promise((resolve) => {
        const reader = new FileReader();
        reader.onloadend = () => resolve(reader.result);
        reader.readAsDataURL(blob);
      });

      // Get the source language from the language selector drop-down menu
      const sourceLang = document.getElementById('language').value;

      // Send the audio data to Bhashini's ASR service and display the transcribed text in the text input box
      const text = await bhashini.asr(sourceLang, audioBase64);
      document.getElementById('prompt').value = text;
    };

    mediaRecorder.start();
  }
}
// User chat div
export const userDiv = (data) => {
  return `
  <!-- User Chat -->
          <div class="flex items-center gap-2 justify-start m-2">
            <img src="human.png" alt="user icon" class="w-10 h-10 rounded-full"/>
            <div class="bg-gemDeep text-white p-1 rounded-md shadow-md mx-2">${data}</div>
          </div>
  `;
};

// AI Chat div
export const aiDiv = (data) => {
  return `
  <!-- AI Chat -->
          <div class="flex gap-2 justify-end m-2">
            <div class="bg-gemDeep text-white p-1 rounded-md shadow-md mx-2">${data}</div>
            <img src="bot.png" alt="bot icon" class="w-10 h-10 rounded-full"/>
          </div>
  `;
};

async function handleSubmit(event) {
  event.preventDefault();

  let userMessage = document.getElementById("prompt");
  const chatArea = document.getElementById("chat-container");

  var prompt = userMessage.value.trim();
  if (prompt === "") {
    return;
  }
  const SystemInstructions ="System Instructions {You are a QnA Chatbot for A website called Nyaya Vikas , your job is to use the context given to you (all the data regarding this wesbite) and answer questions , do not answer questions other than those regarding nayaya vikas , just politely tell them to ask questions regarding this project only , only answer the user in the langauge they have asked question in }";
  const context="Context for Nyaya Vikas QnA\n{\n\n1. General Information\nQ: What is Nyaya Vikas?\nA: Nyaya Vikas is a comprehensive online platform, encompassing both a web portal and a mobile app, designed to monitor and provide information about the development of judicial infrastructure in India. It's a key tool for the Department of Justice (DoJ) and State Governments to track the progress of centrally sponsored schemes for developing infrastructure facilities for the judiciary.\nQ: What is the purpose of Nyaya Vikas?\nA: Nyaya Vikas serves two primary purposes:\nInformation Dissemination: It offers detailed information on the current status of judicial infrastructure, including the number of court halls and residential units for judges and judicial officers in District and Subordinate courts nationwide. It also showcases data about financial assistance from the Central Government to State Governments under the Centrally Sponsored Scheme and its utilization.\nOnline Monitoring: It acts as a dynamic online monitoring mechanism for the DoJ and State Governments to track the construction progress of judicial infrastructure projects under the Centrally Sponsored Scheme (CSS).\nQ: What are the key features of Nyaya Vikas?\nA: Nyaya Vikas offers several key features:\nProject Database: A comprehensive database of all projects across India, detailing project details, location, status, and financial information.\nInteractive Maps: Geotagged project locations displayed on interactive maps for easy visualization of project distribution and progress.\nProgress Reporting: Detailed progress reports and dashboards with real-time data and insightful analysis, using graphs, diagrams, and tables.\nFinancial Tracking: Accurate tracking of financial assistance from the central government to the states, including fund allocation and utilization.\nDocument Repository: A central repository of important documents like guidelines, user manuals, and related policy documents.\nImage Gallery: A visual representation of ongoing projects, showcasing progress and completed projects.\nUser Roles: Defined user roles for different stakeholders, including Central Users, State Users (Nodal Officers, Moderators, and Surveyors).\nQ: How does Nyaya Vikas benefit the stakeholders?\nA: Nyaya Vikas benefits various stakeholders:\nCentral Government: Provides real-time insights into project progress, facilitates transparent financial management, and aids in policy development.\nState Governments: Enables efficient project monitoring, ensures timely utilization of funds, and allows for coordinated implementation.\nJudiciary: Offers access to comprehensive information about infrastructure development, enabling improved planning and resource allocation.\nLitigants: Provides transparency and accountability in judicial infrastructure development, fostering confidence in the justice system.\n2. Accessing Nyaya Vikas\nQ: How can users access the Nyaya Vikas web portal?\nA: Users can access the Nyaya Vikas web portal by visiting its URL: [Insert URL here]. The website is accessible across various operating systems and browsers. For optimal experience, Chrome is the preferred browser.\nQ: How do I log in to the Nyaya Vikas web portal?\nA: To log in, navigate to the web portal and locate the \"Login\" section. Enter your username and password provided to you by your respective government department. If you have forgotten your password, you can reset it by clicking on the \"Forgot Password?\" link.\nQ: How do I access the Nyaya Vikas mobile application?\nA: The Nyaya Vikas mobile application is available for download from the web portal after successfully logging in. It's compatible with various mobile operating systems (iOS, Android).\nQ: What are the system requirements for accessing the Nyaya Vikas mobile application?\nA: The mobile application requires a smartphone with the following specifications:\nOperating system: iOS or Android\nBuilt-in GPS receiver: For accurate project location tracking\nBuilt-in camera: For capturing project images\nRAM: 2 GB recommended\nInternet connectivity: GPRS/WiFi\nMinimum Memory/SD Card: 4 GB\n3. User Roles and Responsibilities\nQ: What are the different user roles in Nyaya Vikas?\nA: Nyaya Vikas has different user roles, each with specific functionalities and responsibilities:\nCentral Users: Officers from the Department of Justice, Ministry of Law and Justice, Delhi. They are responsible for:\nUploading financial assistance details to states/UTs.\nEnsuring participation of state users.\nProviding guidance to state users.\nMonitoring project progress.\nFacilitating improvements in the web portal and mobile app.\nState Users: These are officers of State Governments/State PWD Department nominated by the Law/Judicial/Home Department. They include:\nNodal Officers: Responsible for:\nCreating projects with detailed information in the web portal.\nUploading Utilization Certificates (UC) for projects.\nEnsuring regular data uploads by surveyors/moderators.\nModerators: Responsible for:\nVerifying and approving observations uploaded by surveyors.\nMonitoring project progress through the web portal.\nSurveyors: Responsible for:\nVisiting project sites to collect data and capture images.\nUsing the mobile app to enter physical progress and upload project photos.\nGeo-tagging project locations using the mobile app's GPS functionality.\nQ: How are the user IDs and passwords distributed to the State Users?\nA: State-specific user IDs and passwords are shared by the DoJ with the respective Law/Judicial/Home Department of State Governments and UTs. These departments are responsible for distributing the credentials to the surveyors and moderators.\n4. Data Entry and Management\nQ: What kind of information is required to be entered on the Nyaya Vikas web portal?\nA: On the web portal, you'll need to enter the following information for each project:\nProject Details: Project name, project code, location, project type (court hall, residential unit, etc.), project cost, and any other relevant details.\nFinancial Information: Funding details, including the amount allocated by the Central Government and the state government, and the expenditure incurred on the project.\nPhysical Progress: Stages of construction, milestones achieved, and completion status.\nUtilization Certificate (UC): This document, uploaded in PDF format, is required to be uploaded by the State Nodal Officer. It provides evidence of how the allocated funds have been utilized for the project.\nQ: What kind of information is required to be entered on the Nyaya Vikas mobile application?\nA: On the mobile app, the Surveyor needs to enter the following details:\nProject Selection: Choose the project from the list.\nProject Status: Select the current stage of construction.\nSurveyor Remarks: Provide any observations or comments about the project.\nImage Capture and Upload: Capture and upload up to two photos of the project site to showcase the current progress. The app's GPS feature will automatically geo-tag the location.\nQ: How often should the data be updated on the web portal and mobile app?\nA: The data should be updated on the Nyaya Vikas web portal and mobile app at least once a month to ensure accurate and timely monitoring.\nQ: Are there any limitations on the number of characters or special characters when entering data?\nA: Yes, all text fields have specific character limits to ensure data consistency. The maximum character limit for each field will be displayed. Special characters like hyphen, semicolon, colon, and star are not allowed in the data fields.\nQ: What happens if a user forgets their password?\nA: If you forget your password, you can reset it by clicking on the \"Forgot Password?\" link on the login page. You will be directed to a page where you can enter your username and follow the instructions to receive a new password via email.\nQ: Can entered data be modified or deleted?\nA: Modification of data is allowed for State Users. They can edit project information at any time. The option to delete project information is only available to Central Users.\n5. Reporting and Analysis\nQ: What types of reports can be generated from the Nyaya Vikas web portal?\nA: The Nyaya Vikas web portal allows users to generate a variety of reports, including:\nProject-Specific Reports: Detailed reports for individual projects, covering financial information, progress details, and images.\nState-Level Reports: Reports for specific states, summarizing all projects within that state.\nConsolidated Reports: A comprehensive report for all states, providing a nationwide overview of project progress.\nQ: What formats can these reports be exported in?\nA: Nyaya Vikas reports can be exported in Microsoft Excel (.xlsx) format for easy analysis and further processing.\nQ: What are the key insights provided by the Nyaya Vikas dashboard?\nA: The Nyaya Vikas dashboard offers various visualizations to understand project progress and financial aspects:\nMaps: Interactive maps display the location of all projects, showing their progress status.\nGraphs and Charts: Visual representations of project distribution, completion rates, and financial expenditure, providing a clear picture of project performance.\nTables: Tabulated data of project details, financial information, and progress, allowing for easy comparison and analysis.\n6. Technical Support and FAQs\nQ: How to contact for technical support?\nA: You can contact the Department of Justice, Ministry of Law and Justice, Delhi or the Regional Remote Sensing Center-North, National Remote Sensing Center, ISRO Delhi for technical assistance. Their contact details are available on the web portal and shared with State Users.\nQ: What if there is limited or no internet connectivity in the area?\nA: The mobile app allows you to save entered project details even without internet connectivity. Once the internet connection is restored, you can send the saved data to the server.\nQ: What is the role of the mobile application in the Nyaya Vikas system?\nA: The mobile app is primarily responsible for data collection from the field. It uses the device's GPS receiver to geo-tag project locations and captures images of the project site. This real-time data collected through the app is then synchronized with the web portal, providing a comprehensive view of the project progress.\n7. Additional FAQs\nQ: What is the role of the moderator in the data verification process?\nA: The moderator plays a crucial role in ensuring the accuracy of data collected by the surveyors. They review the surveyor's observations and uploaded images to verify their accuracy and consistency. If they find any discrepancies or need clarification, they can communicate with the surveyor and ask for corrections.\nQ: What is the purpose of geo-tagging projects?\nA: Geo-tagging projects using the mobile app's GPS feature is essential for ensuring the accuracy and traceability of project locations. It helps confirm that the captured images and entered progress information correspond to the correct site.\nQ: Are there any specific guidelines for capturing and uploading project images?\nA: Yes, the mobile app has guidelines for capturing and uploading project images. They recommend using high-quality images with a resolution of less than 1 megapixel. The app allows uploading up to two images at a time. Additional photos of the same project can be uploaded later.\nQ: What is the purpose of the Nyaya Vikas document repository?\nA: The document repository is a central hub for all important documents related to the Centrally Sponsored Scheme for Development of Infrastructure Facilities for Judiciary. It houses policy documents, guidelines, user manuals, and other relevant information for the users.\nQ: Why is it crucial to update project information regularly?\nA: Regular updates of project details and status are vital for effective monitoring. They allow the DoJ and State Governments to track the project's progress in real-time, identify any delays or challenges, and ensure the timely completion of projects.\nQ: What are the benefits of using Nyaya Vikas?\nA: Nyaya Vikas offers several benefits:\nTransparency and Accountability: The system promotes transparency in the allocation and utilization of funds, making the development process accountable to all stakeholders.\nReal-time Monitoring: Real-time updates on project progress provide timely insights and allow for proactive intervention if required.\nImproved Project Management: The data collected through the web portal and mobile app helps optimize project management and ensure the efficient allocation of resources.\nEnhanced Collaboration: The platform facilitates seamless communication and collaboration between the central government, state governments, and other stakeholders.\nData-driven Decision Making: The comprehensive data analysis provided by the system supports informed decision-making, leading to better planning and implementation of judicial infrastructure projects.\n\n\n\n\n\n\n\n}\n\n\n\nSTATEMENT GIVING GRANTS RELEASED UNDER CSS SCHEME FOR INFRASTRUCTURAL FACILITIES FOR JUDICIARY \n\nSl.\nNo.\nState 1993 to\n2013-14\n2014-15 2015-16 2016-17 2017-18 2018-19 2019-20 2020-21 2021-22 Total\n(1993-94 to\n2021-22)\n1\nAndhra\nPradesh 15964.45 0.00 0.00 0.00 0.00 1000.00 2000.00 1028.00 19992.45\n2 Bihar 5560.37 4909.35 0.00 5000.00 4290.00 6204.00 8762.00 6572.00 41297.72\n3\nChhattisg\narh 5004.47 2176.60 0.00 0.00 0.00 1968.00 1983.00 784.00 11916.07\n4 Goa 799.93 0.00 0.00 0.00 0.00 315.00 406.00 380.00 320 1900.93\n5 Gujarat 25264.42 10000.00 5000.00 5000.00 5000.00 1502.00 1649.00 1350.40 54765.82\n6 Haryana 9286.42 0.00 5000.00 0.00 1500.00 1191.00 1406.00 2200.00 20583.42\n7\nHimachal\nPradesh 2313.00 0.00 0.00 819.00 0.00 408.00 572.00 550.00 4662.00\n8\nJammu &\nKashmir 8722.60 3429.00 1325.00 2104.00 1000.00 1901.00 1000.00 0.00 19481.60\n9 Jkhand 5099.52 3044.00 3044.00 0.00 5000.00 959.00 1374.00 905.00 600 20025.52\n10 K'taka 27491.85 16370.00 5000.00 5000.00 5000.00 3812.00 4404.00 2972.00 2700 72749.85\n11 Kerala 6087.30 0.00 0.00 0.00 2500.00 3082.00 1582.00 1300.00 14551.30\n12 MP 18972.04 6141.00 5000.00 0.00 5000.00 7942.00 6690.00 4560.00 5500 59805.04\n13\nMaharasht\nra 39966.86 9975.00 5000.00 4975.00 5000.00 1058.00 6109.00 2311.00 1800 74394.86\n14 Odisha 9024.27 0.00 0.00 0.00 0.00 2250.00 3569.00 0.00 14843.27\n15 Punjab 22579.92 9805.00 5000.00 4800.00 5000.00 2647.00 3978.00 1647.60 1650 55457.52\n16 R'than 6402.51 0.00 5000.00 4374.00 1734.00 1741.00 6421.00 2990.00 4150 32812.51\n17 TN 15131.46 0.00 0.00 5000.00 0.00 609.00 3871.00 1817.00 26428.46\n18 T'gana 0.00 0.00 0.00 0.00 0.00 1000.00 565.00 1600.00 3165.00\n19 UK 4508.11 3559.05 0.00 0.00 2500.00 2202.00 2850.00 586.00 16205.16\n20 UP 55129.57 12531.00 5000.00 5000.00 7500.00 12806.00 16966.00 11100.00 11900 126032.57\n21 WB 8953.46 2000.00 0.00 0.00 1734.00 3522.00 6143.00 3107.00 25459.46\nTotal (A) 292262.53 83940.00 44369.00 42072.00 52758.00 58119.00 82300.00 47760.00 28620 703580.53\nNER\n1 Aru.P 2163.44 1000.00 1593.00 0.00 0.00 0.00 269.00 500.00 409.00 5934.44\n2 Assam 11771.30 0.00 0.00 0.00 2000.00 3209.00 3654.00 2500.00 2740 25874.30\n3 Manipur 2141.71 2000.00 2000.00 0.00 0.00 887.00 966.00 500.00 8494.71\n4 Megh.. 1771.00 1709.00 2037.00 2000.00 863.00 1482.00 2285.00 771.00 1150 14068.00\n5 Mizoram 2617.29 1085.00 0.00 0.00 2000.00 594.00 524.00 500.00 450 7770.29\n6\nNagaland 4779.64 2016.00 0.00 2000.00 2000.00 321.00 342.00 500.00 11958.64\n7 Sikkim 4630.39 0.00 0.00 0.00 0.00 257.00 278.00 295.00 5460.39\n8 Tripura 5503.45 1550.00 0.00 0.00 0.00 0.00 1882.00 774.00 9709.45\nTotal (B) 35378.22 9360.00 5630.00 4000.00 6863.00 6750.00 10200.00 6340.00 4749 84521.22\nUTs\n1 A&N 895.55 0.00 0.00 259.68 0.00 131.00 16.79 35.36 83.76 1422.14\n2 Chdgrh 3900.95 0.00 0.00 0.00 0.00 0.00 0.00 0.00 3900.95\n3 DNHaveli 706.25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 706.25\n4\nDaman &\nDiu 190.00 0.00 0.00 42.43 0.00 0.00 0.00 0.00 232.43\n5 Delhi 7897.08 0.00 6040.32 5000.00 2500.00 4852.21 4500.00 3000 33789.61\n6\nLakshadw\neep 51.25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 51.25\n7\nPuducherr\ny 3148.88 0.00 259.68 2500.00 0.00 0.00 331.00 0.00 6239.56\n8 J&K 0.00 0.00 0.00 0.00 0.00 0.00 500.00 664.64 2000 3164.64\n9 Ladakh 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00\nTotal (C) 16789.96 0.00 6300.00 7802.11 2500.00 131.00 5700.00 5200.00 5083.76 44423.07\nGrand\nTotal\n(A+B+C)\n344430.71 93300.00 56299.00 53874.11 62121.00 65000.00 98200.00 59300.00 38452.76 870977.58\n\n\n\nState-wise and Year-wise pendency of Utilization Certificate of Central Share (upto 2019-20) as on 12.11.2021\n\n\nStates 1997-98 2011-\n12\n2016-\n17 2018-19 2019-20 1993-94 to\n2019-20 2020-21 2021-22 Total\nAndhra Pradesh 4.1800 4.1800 10.2800 14.4600\nBihar 40.0381 40.0381 65.7200 105.7581\nChhatisgarh 0.0000 7.8400 7.8400\nHaryana 0.0000 22.0000 22.0000\nHimachal Pradesh 4.2676 4.2676 5.5000 9.7676\nGoa 0.0000 0.0000 0.0000 3.2000 3.2000\nOdisha 0.0000 28.4200 28.4200 28.4200\nRajasthan 0.0000 0.0000 16.6936 41.5000 58.1936\nGujarat 16.4900 16.4900 13.5040 29.9940\nWest Bengal 0.0000 6.6643000 6.6643 31.0700 37.7343\nJharkhand 0.0000 0.0000 0.0000 6.0000 6.0000\nKarnataka 0.0000 29.7200 27.0000 56.7200\nKerala 0.0000 0.0000 0.0000\nMadhya Pradesh 0.0000 45.6000 55.0000 100.6000\nMaharashtra 0.0000 0.0000 2.0450 18.0000 20.0450\nPunjab 0.0000 0.0000 1.5000 1.5000\nTelangana 0.0000 0.0000 16.0000 16.0000\nTamil Nadu 0.0000 0.0000 0.0000 0.0000 0.0000\nUttarakhand 0.4714 5.5350 6.0064 5.8600 11.8664\nUttar Pradesh 0.0000 0.0000 57.2700 103.3200 160.5900\nJammu & Kashmir 0.0000 0.0000 0.0000\nTotal States 0.0000 0.0000 0 0.4714 105.595020 106.066440 329.1026 255.5200 690.689040\nNorth East Region\nArunachal Pradesh 0.0000 0.0000 5.0000 4.0900 9.0900\nManipur 9.6600 9.6600 5.0000 14.6600\nMeghalaya 0.0000 0.0000 0.0000 11.5000 11.5000\nMizoram 0.0000 0.0000 4.5000 4.5000\nNagaland 3.4200 3.4200 5.0000 8.4200\nSikkim 2.4688 2.4688 2.9500 5.4188\nTripura 11.4244 11.4244 7.7400 19.1644\nAssam 0.0000 0.0000 25.0000 27.4000 52.4000\nTotal NE States 0.0000 0.0000 0 0.0000 26.9732 26.9732 50.6900 47.4900 125.1532\nUnion Territories\nA & Nicobar Islands 0.0000 0.0000 0.0000 0.8376 0.8376\nPuducherry 0 0.3899 0.3899 0.3899\nDadra & Nagar Haveli 0.0000 0.0000\nGovt. of NCT of Delhi 0.0000 0.0000 0.0144 30.0000 30.0144\nLakshadweep 0.1386 0.1386 0.1386\nChandigarh 1.7126 1.7126 1.7126\nDaman & Diu 0.0000 0.0000\njammu and kashmir 0.0000 0.0000 1.7715 20.0000 21.7715\nladakh 0.0000 0.0000\nTotal UTs 0.1386 1.7126 0 0.0000 0.389945 2.241137 1.7859 50.8376 54.8646\nGrand Total 0.1386 1.7126 0 0.4714 132.9581 135.2807 381.5785 353.8476 870.70683580\n\n\nSpeed Post\nNO. J — 13011/6/2015-JR\nGovernment of India\nMinistry of Law and Justice\nDepartment of Justice\nJaisalmer House, Mansingh Road, New Delhi-110011, Dated: 15\" December, 2015.\nORDER\nSubject: Centrally Sponsored Scheme for Development of Infrastructure Facilities for\nthe Judiciary-Revision of funding pattern.\nReference no. : Department of Justice, Ministry of Law and Justice Order no. J- 12021/6/201 1-JR dated 15™ July, 2011.\nThe Department of Justice has been implementing the Centrally Sponsored\nScheme (CSS) for Development of Infrastructure Facilities for the Judiciary to augment the\nresources of the State Governments in this regard. The scheme in its present format covers\nconstruction of court buildings and residential accommodation of judicial officers/judges\ncovering District and Subordinate Courts. The scheme aims at improving the physical\ninfrastructure of the Subordinate Courts as also the housing for judicial officers in the\ncountry with a view to facilitate better justice delivery.\n2. The fund sharing pattern under the Scheme since its last revision in 2011 was 75:25 between Centre and the State Governments in respect of the States other than North- Eastern States and 90:10 basis (90 being Central share) in respect of North-Eastern States. The central assistance to Union Territories is granted without the fund sharing requirement.\n3. In accordance with Department of Expenditure, Ministry of Finance DO letter no. 32/PSO/FS/2015 dated 28.10.2015 the fund sharing pattern under the Scheme is revised\nfrom the year 2015-16 in the ratio of 60:40 between Centre and the State, except 8 North\nEastern States, namely, Arunachal Pradesh, Assam, Mizoram, Meghalaya, Tripura, Nagaland, Manipur and Sikkim, and 3 Himalayan States, namely, Jammu and Kashmir, Himachal Pradesh and Uttarakhand, where the ratio of 90:10 will apply. For Union\nTerritories the assistance will continue without the fund sharing requirement.\n4. The central assistance to States/UTs is restricted to the budgetary provision\navailable under the scheme during the financial year. However, States/UTs are free to\nspend additional amount as per their requirements from their own resources. This Centrally\nSponsored Scheme is not a reimbursement scheme.\nM»’,Mg\\\n(C.K. Reejonia)\nDeputy Secretary to the Govt. of India\nTelefax: 23072146\nTo,\nChief Secretaries of all the States/UTs\nLaw/Home Secretaries of all the States/UTs\nFinance Secretaries of all the States/UTs\nRegistrar Generals of all the High Courts\nORON\nResident Commissioner of all State/UTs\n=\nCopy to:\n1. Secretary, Department of Justice, Ministry of Law and Justice\n2. Secretary, Department of Expenditure, Ministry of Finance, North Block, New Delhi\n3. AS &FA, Ministry of Law and Justice /w[ i\n(CK. Ree;onla) \n\n\nlink for website map of all completed projects and to view the dashboard use this link - https://bhuvan-nyayavikas.nrsc.gov.in/dashboard/index.php\n}}}}The Nyaya Vikas mobile app has certain specifications and guidelines for its use. The pictures that can be uploaded on the mobile app should be less than 1 Mega Pixel in size. The app allows the upload of 2 pictures at a time, and more photos of the same project can be uploaded at a later time.The Surveyor is required to enter specific information on the Nyaya Vikas mobile application. This includes selecting the project name from the list, the Stage of Construction presently, and adding Surveyor remarks. The Surveyor is also expected to click photos of the project site from his mobile and upload them.The details and photographs for one project need to be entered once in a month. There is a limit on the number of characters when entering the data, and the maximum limit of characters will be shown against each field. Special Characters like hyphen, semicolon, colon, star, etc., are not allowed when entering data.There is a provision for the Surveyor/Moderator to add remarks, but once the data is entered, it cannot be modified or deleted. In areas with limited or no internet connectivity, the project details can be saved and sent when the network connectivity improves.The entered data can be viewed on the web portal. Once the data is submitted, the Moderator has to log in to the web portal/mobile app and verify the details for approval. If the Moderator disagrees or has clarifications regarding the data entered by the Surveyor, they can note the same in the remarks section and confer with the Surveyor before approving.In case of technical difficulties, the Department of Justice, Ministry of Law and Justice, Delhi or Regional Remote Sensing Center-North, National Remote Sensing Center, ISRO Delhi can be contacted through email and phone. The contact details are mentioned on the web portal and also shared with State Users. A User manual for the Nyaya Vikas mobile application is available on the Nyaya Vikas web-portal.The purpose of having a web-portal in addition to the mobile app is to allow for viewing data on a map, approving data, uploading project details, and generating various reports. The web-portal provides a centralized location for all of this information, making it easily accessible for all users.The State User-Nodal Officer is responsible for uploading project details and Utilization Certificates (UCs) to the web-portal. They also ensure that regular project observations are uploaded by the surveyors and moderators. The moderators' role is to verify the observations that have been uploaded by the surveyors and to approve them.The surveyors' role is to visit the project sites and to upload pictures of the current status using the mobile app. This is done periodically to monitor the progress of the construction. The surveyors, moderators, and State User-Nodal Officers all receive their User IDs and passwords from the State User-Nodal Officer.The UC document should be uploaded to the web-portal in PDF format. Nyaya Vikas is a web-portal and mobile app that provides information on the status of judicial infrastructure in the country. It also acts as an online monitoring mechanism for judicial infrastructure projects. Users in the Central Government and State Governments can enter information into the web-portal.Nodal Officers, moderators, and surveyors in Nyaya Vikas are known as STATE USERS. These officers are nominated by the relevant departments of the State Governments and UT Administrations. Users in the Central Government and State Governments can access the web-portal by logging in using their credentials (username and password) on the home page.Nodal Officers, surveyors, and moderators all have login IDs for the web-portal. A CENTRAL USER is an officer or officers of the Department of Justice who are responsible for various tasks, including uploading financial assistance provided to States/UTs, monitoring project progress, and facilitating improvements in the Nyaya Vikas portal.The roles and responsibilities of the Nodal Officers include creating and updating projects with physical and financial details in the Nyaya Vikas portal, ensuring that project progress information is regularly uploaded, and coordinating with other users. The surveyors' roles and responsibilities include visiting the project sites, entering physical progress and photos using the mobile app, and ensuring regular updates on the project status.The moderators' roles and responsibilities include verifying the observations and progress details that have been uploaded by the surveyors, approving them, and monitoring the project progress through the web-portal. All operating systems in mobile and computer, including iOS, Ubuntu, Windows XP/Vista, etc., support the web-portal and mobile app.The preferred browser for Nyaya Vikas URL is Chrome. Geo-tagging of a project refers to the geo-location of the project shown in the map with latitude and longitude. Customized reports can be generated from the web-portal and can be exported in excel. Separate reports for each state and a consolidated report for all the states can be generated.The data collected, analyzed, and consolidated from the physical and financial progress entered by Central and State Users is depicted on the DASHBOARD through graphs, diagrams, tables, maps. A user manual is available for the Nyaya Vikas web-portal. The facility to delete project information is only with the Central Users, while the State users can modify/edit any project information at any time.There is a specific format in which the utilization certificate is uploaded on the web-portal, and it should be in pdf. If one forgets the password, a new password can be created. There is a limit on the number of characters when entering the data on the web-portal, and special characters like hyphen, semicolon, colon, star, etc., are not allowed.The key role of the Nyaya Vikas mobile application is to enable the collection of live/actual data from the field using Global Positioning System (GPS) and to monitor the project's progress. All authorized users can access the mobile app with the credentials provided to them. The Surveyor visits the project site, enters his user id and password, and gains access to the mobile app. He then enters his observations on the physical progress of the project along with photos on the app. The mobile app has a geotagging facility which enables tracking the exact location of the project and verifying the stage of construction by both the Central and State Users.The Moderator's role is to verify the observations uploaded by the Surveyor and approve them. The Law/Judicial/Home Department of State Governments and UTs appoint the Moderators and Surveyors from the officials of Public Works Department (PWD) in their respective states. Nyaya Vikas mobile app is available to download from the portal after the successful login. The procedure of using the Nyaya Vikas mobile app is given in the User manual, which is available on the Nyaya Vikas Portal. Surveyors can upload the pictures of the project through the mobile app, and other Surveyors from other districts can share the application of a district by sharing the user id and password. The application can be downloaded on all smartphones with a Built-in GPS receiver, in-built camera, RAM- 2GB Recommended, GPRS / WiFi with internet facility, and Minimum Memory / SD card: 4 GB. The Surveyor enters his user id and password in the login area of the app, and the mandatory steps to follow once logged in to the mobile app are not mentioned in the provided information.";
  console.log("user message", prompt);

  chatArea.innerHTML += userDiv(md().render(prompt));
  userMessage.value = "";
  const aiResponse = await getResponse(SystemInstructions + context + "user prompt " + prompt); 
  let md_text = md().render(aiResponse);
  chatArea.innerHTML += aiDiv(md_text);

  let newUserRole = {
    role: "user",
    parts: prompt,
  };
  let newAIRole = {
    role: "model",
    parts: aiResponse,
  };

  history.push(newUserRole);
  history.push(newAIRole);

  console.log(history);
}

const chatForm = document.getElementById("chat-form");
chatForm.addEventListener("submit", handleSubmit);

chatForm.addEventListener("keyup", (event) => {
  if (event.keyCode === 13) handleSubmit(event);
});

// Get the elements
const chatbotPopup = document.getElementById('chatbot-popup');
const openChatbotButton = document.getElementById('open-chatbot');

// Event to open the chatbot
openChatbotButton.addEventListener('click', () => {
    chatbotPopup.style.display = 'block';
});

const closeChatbotButton = document.getElementById('close-chatbot');

// Event to close the chatbot
closeChatbotButton.addEventListener('click', () => {
    chatbotPopup.style.display = 'none';
});
// Add an event listener to the microphone button
const micButton = document.querySelector('.mic-button');
micButton.addEventListener('click', recordAudio);